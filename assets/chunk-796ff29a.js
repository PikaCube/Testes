import{c as n}from"./chunk-ca93beb9.js";var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})(n,e)};function e(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function r(n,t,e,r){return new(e||(e=Promise))((function(o,i){function u(n){try{s(r.next(n))}catch(t){i(t)}}function c(n){try{s(r.throw(n))}catch(t){i(t)}}function s(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((r=r.apply(n,t||[])).next())}))}function o(n,t){var e,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(u=0)),u;)try{if(e=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return u.label++,{value:c[1],done:!1};case 5:u.label++,r=c[1],c=[0];continue;case 7:c=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){u=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){u.label=c[1];break}if(6===c[0]&&u.label<o[1]){u.label=o[1],o=c;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(c);break}o[2]&&u.ops.pop(),u.trys.pop();continue}c=t.call(n,u)}catch(s){c=[6,s],r=0}finally{e=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}function i(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var r,o,i=e.call(n),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return u}function c(n,t,e){if(e||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return n.concat(r||Array.prototype.slice.call(t))}function s(n){return this instanceof s?(this.v=n,this):new s(n)}function a(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=e.apply(n,t||[]),i=[];return r={},u("next"),u("throw"),u("return"),r[Symbol.asyncIterator]=function(){return this},r;function u(n){o[n]&&(r[n]=function(t){return new Promise((function(e,r){i.push([n,t,e,r])>1||c(n,t)}))})}function c(n,t){try{(e=o[n](t)).value instanceof s?Promise.resolve(e.value.v).then(a,l):f(i[0][2],e)}catch(r){f(i[0][3],r)}var e}function a(n){c("next",n)}function l(n){c("throw",n)}function f(n,t){n(t),i.shift(),i.length&&c(i[0][0],i[0][1])}}function l(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=i(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(e){t[e]=n[e]&&function(t){return new Promise((function(r,o){(function(n,t,e,r){Promise.resolve(r).then((function(t){n({value:t,done:e})}),t)})(r,o,(t=n[e](t)).done,t.value)}))}}}function f(n){return"function"==typeof n}function p(n){var t=n((function(n){Error.call(n),n.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var h=p((function(n){return function(t){n(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(n,t){return t+1+") "+n.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function y(n,t){if(n){var e=n.indexOf(t);0<=e&&n.splice(e,1)}}var d=function(){function n(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return n.prototype.unsubscribe=function(){var n,t,e,r,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=i(s),l=a.next();!l.done;l=a.next()){l.value.remove(this)}}catch(w){n={error:w}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(n)throw n.error}}else s.remove(this);var p=this.initialTeardown;if(f(p))try{p()}catch(g){o=g instanceof h?g.errors:[g]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var d=i(y),b=d.next();!b.done;b=d.next()){var m=b.value;try{v(m)}catch(x){o=null!=o?o:[],x instanceof h?o=c(c([],u(o)),u(x.errors)):o.push(x)}}}catch(_){e={error:_}}finally{try{b&&!b.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}}if(o)throw new h(o)}},n.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)v(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}},n.prototype._hasParent=function(n){var t=this._parentage;return t===n||Array.isArray(t)&&t.includes(n)},n.prototype._addParent=function(n){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n},n.prototype._removeParent=function(n){var t=this._parentage;t===n?this._parentage=null:Array.isArray(t)&&y(t,n)},n.prototype.remove=function(t){var e=this._finalizers;e&&y(e,t),t instanceof n&&t._removeParent(this)},n.EMPTY=((t=new n).closed=!0,t),n}();function b(n){return n instanceof d||n&&"closed"in n&&f(n.remove)&&f(n.add)&&f(n.unsubscribe)}function v(n){f(n)?n():n.unsubscribe()}d.EMPTY;var m=void 0,w=!1,g={setTimeout:function(n,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var o=g.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,c([n,t],u(e))):setTimeout.apply(void 0,c([n,t],u(e)))},clearTimeout:function(n){var t=g.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(n)},delegate:void 0};function x(n){g.setTimeout((function(){throw n}))}function _(){}var S=function(n){function t(t){var e=n.call(this)||this;return e.isStopped=!1,t?(e.destination=t,b(t)&&t.add(e)):e.destination=M,e}return e(t,n),t.create=function(n,t,e){return new O(n,t,e)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(d),I=Function.prototype.bind;function E(n,t){return I.call(n,t)}var P=function(){function n(n){this.partialObserver=n}return n.prototype.next=function(n){var t=this.partialObserver;if(t.next)try{t.next(n)}catch(e){T(e)}},n.prototype.error=function(n){var t=this.partialObserver;if(t.error)try{t.error(n)}catch(e){T(e)}else T(n)},n.prototype.complete=function(){var n=this.partialObserver;if(n.complete)try{n.complete()}catch(t){T(t)}},n}(),O=function(n){function t(t,e,r){var o,i,u=n.call(this)||this;f(t)||!t?o={next:null!=t?t:void 0,error:null!=e?e:void 0,complete:null!=r?r:void 0}:u&&w?((i=Object.create(t)).unsubscribe=function(){return u.unsubscribe()},o={next:t.next&&E(t.next,i),error:t.error&&E(t.error,i),complete:t.complete&&E(t.complete,i)}):o=t;return u.destination=new P(o),u}return e(t,n),t}(S);function T(n){x(n)}var M={closed:!0,next:_,error:function(n){throw n},complete:_},j="function"==typeof Symbol&&Symbol.observable||"@@observable";function A(n){return n}function k(n){return 0===n.length?A:1===n.length?n[0]:function(t){return n.reduce((function(n,t){return t(n)}),t)}}var z=function(){function n(n){n&&(this._subscribe=n)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(n,t,e){var r,o=this,i=(r=n)&&r instanceof S||function(n){return n&&f(n.next)&&f(n.error)&&f(n.complete)}(r)&&b(r)?n:new O(n,t,e);return function(){var n=o,t=n.operator,e=n.source;i.add(t?t.call(i,e):e?o._subscribe(i):o._trySubscribe(i))}(),i},n.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(t){n.error(t)}},n.prototype.forEach=function(n,t){var e=this;return new(t=R(t))((function(t,r){var o=new O({next:function(t){try{n(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t});e.subscribe(o)}))},n.prototype._subscribe=function(n){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(n)},n.prototype[j]=function(){return this},n.prototype.pipe=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return k(n)(this)},n.prototype.toPromise=function(n){var t=this;return new(n=R(n))((function(n,e){var r;t.subscribe((function(n){return r=n}),(function(n){return e(n)}),(function(){return n(r)}))}))},n.create=function(t){return new n(t)},n}();function R(n){var t;return null!==(t=null!=n?n:m)&&void 0!==t?t:Promise}function U(n){return function(t){if(function(n){return f(null==n?void 0:n.lift)}(t))return t.lift((function(t){try{return n(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function L(n,t,e,r,o){return new Y(n,t,e,r,o)}var Y=function(n){function t(t,e,r,o,i,u){var c=n.call(this,t)||this;return c.onFinalize=i,c.shouldUnsubscribe=u,c._next=e?function(n){try{e(n)}catch(r){t.error(r)}}:n.prototype._next,c._error=o?function(n){try{o(n)}catch(e){t.error(e)}finally{this.unsubscribe()}}:n.prototype._error,c._complete=r?function(){try{r()}catch(n){t.error(n)}finally{this.unsubscribe()}}:n.prototype._complete,c}return e(t,n),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var e=this.closed;n.prototype.unsubscribe.call(this),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(S),q=new z((function(n){return n.complete()}));function F(n){return n[n.length-1]}function C(n){return(t=F(n))&&f(t.schedule)?n.pop():void 0;var t}function W(n,t){return"number"==typeof F(n)?n.pop():t}var G=function(n){return n&&"number"==typeof n.length&&"function"!=typeof n};function B(n){return f(null==n?void 0:n.then)}function D(n){return f(n[j])}function H(n){return Symbol.asyncIterator&&f(null==n?void 0:n[Symbol.asyncIterator])}function J(n){return new TypeError("You provided "+(null!==n&&"object"==typeof n?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var K="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function N(n){return f(null==n?void 0:n[K])}function Q(n){return a(this,arguments,(function(){var t,e,r;return o(this,(function(o){switch(o.label){case 0:t=n.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,s(t.read())];case 3:return e=o.sent(),r=e.value,e.done?[4,s(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,s(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function V(n){return f(null==n?void 0:n.getReader)}function X(n){if(n instanceof z)return n;if(null!=n){if(D(n))return o=n,new z((function(n){var t=o[j]();if(f(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(G(n))return r=n,new z((function(n){for(var t=0;t<r.length&&!n.closed;t++)n.next(r[t]);n.complete()}));if(B(n))return e=n,new z((function(n){e.then((function(t){n.closed||(n.next(t),n.complete())}),(function(t){return n.error(t)})).then(null,x)}));if(H(n))return Z(n);if(N(n))return t=n,new z((function(n){var e,r;try{for(var o=i(t),u=o.next();!u.done;u=o.next()){var c=u.value;if(n.next(c),n.closed)return}}catch(s){e={error:s}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}n.complete()}));if(V(n))return Z(Q(n))}var t,e,r,o;throw J(n)}function Z(n){return new z((function(t){(function(n,t){var e,i,u,c;return r(this,void 0,void 0,(function(){var r,s;return o(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,6,11]),e=l(n),o.label=1;case 1:return[4,e.next()];case 2:if((i=o.sent()).done)return[3,4];if(r=i.value,t.next(r),t.closed)return[2];o.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=o.sent(),u={error:s},[3,11];case 6:return o.trys.push([6,,9,10]),i&&!i.done&&(c=e.return)?[4,c.call(e)]:[3,8];case 7:o.sent(),o.label=8;case 8:return[3,10];case 9:if(u)throw u.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(n,t).catch((function(n){return t.error(n)}))}))}function $(n,t,e,r,o){void 0===r&&(r=0),void 0===o&&(o=!1);var i=t.schedule((function(){e(),o?n.add(this.schedule(null,r)):this.unsubscribe()}),r);if(n.add(i),!o)return i}function nn(n,t){return void 0===t&&(t=0),U((function(e,r){e.subscribe(L(r,(function(e){return $(r,n,(function(){return r.next(e)}),t)}),(function(){return $(r,n,(function(){return r.complete()}),t)}),(function(e){return $(r,n,(function(){return r.error(e)}),t)})))}))}function tn(n,t){return void 0===t&&(t=0),U((function(e,r){r.add(n.schedule((function(){return e.subscribe(r)}),t))}))}function en(n,t){if(!n)throw new Error("Iterable cannot be null");return new z((function(e){$(e,t,(function(){var r=n[Symbol.asyncIterator]();$(e,t,(function(){r.next().then((function(n){n.done?e.complete():e.next(n.value)}))}),0,!0)}))}))}function rn(n,t){if(null!=n){if(D(n))return function(n,t){return X(n).pipe(tn(t),nn(t))}(n,t);if(G(n))return function(n,t){return new z((function(e){var r=0;return t.schedule((function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())}))}))}(n,t);if(B(n))return function(n,t){return X(n).pipe(tn(t),nn(t))}(n,t);if(H(n))return en(n,t);if(N(n))return function(n,t){return new z((function(e){var r;return $(e,t,(function(){r=n[K](),$(e,t,(function(){var n,t,o;try{t=(n=r.next()).value,o=n.done}catch(i){return void e.error(i)}o?e.complete():e.next(t)}),0,!0)})),function(){return f(null==r?void 0:r.return)&&r.return()}}))}(n,t);if(V(n))return function(n,t){return en(Q(n),t)}(n,t)}throw J(n)}function on(n,t){return t?rn(n,t):X(n)}var un=p((function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}}));function cn(n,t){return U((function(e,r){var o=0;e.subscribe(L(r,(function(e){r.next(n.call(t,e,o++))})))}))}var sn=Array.isArray;function an(n){return cn((function(t){return function(n,t){return sn(t)?n.apply(void 0,c([],u(t))):n(t)}(n,t)}))}function ln(n,t,e){return void 0===e&&(e=1/0),f(t)?ln((function(e,r){return cn((function(n,o){return t(e,n,r,o)}))(X(n(e,r)))}),e):("number"==typeof t&&(e=t),U((function(t,r){return function(n,t,e,r,o,i,u,c){var s=[],a=0,l=0,f=!1,p=function(){!f||s.length||a||t.complete()},h=function(n){return a<r?y(n):s.push(n)},y=function(n){i&&t.next(n),a++;var c=!1;X(e(n,l++)).subscribe(L(t,(function(n){null==o||o(n),i?h(n):t.next(n)}),(function(){c=!0}),void 0,(function(){if(c)try{a--;for(var n=function(){var n=s.shift();u?$(t,u,(function(){return y(n)})):y(n)};s.length&&a<r;)n();p()}catch(e){t.error(e)}})))};return n.subscribe(L(t,h,(function(){f=!0,p()}))),function(){null==c||c()}}(t,r,n,e)})))}function fn(n){return void 0===n&&(n=1/0),ln(A,n)}function pn(n,t,e){return e?pn(n,t).pipe(an(e)):new z((function(e){var r=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.next(1===n.length?n[0]:n)},o=n(r);return f(t)?function(){return t(r,o)}:void 0}))}function hn(n,t){return U((function(e,r){var o=0;e.subscribe(L(r,(function(e){return n.call(t,e,o++)&&r.next(e)})))}))}function yn(n){return U((function(t,e){var r=!1;t.subscribe(L(e,(function(n){r=!0,e.next(n)}),(function(){r||e.next(n),e.complete()})))}))}function dn(n){return n<=0?function(){return q}:U((function(t,e){var r=0;t.subscribe(L(e,(function(t){++r<=n&&(e.next(t),n<=r&&e.complete())})))}))}function bn(n){return void 0===n&&(n=vn),U((function(t,e){var r=!1;t.subscribe(L(e,(function(n){r=!0,e.next(n)}),(function(){return r?e.complete():e.error(n())})))}))}function vn(){return new un}const mn=new Map,wn=(n,t,e)=>{const r=mn.get(n)||new Map;r.set(t,e),mn.has(n)||mn.set(n,r)},gn=n=>t=>{const e=((n,t)=>{const e=mn.get(n);if(e)return e.get(t)})(n,t);e&&(((n,t)=>{const e=mn.get(n);e&&e.delete(t)})(n,t),chrome.runtime.onMessage.removeListener(e))};class xn extends Error{constructor(n){var t,e,{coreMessage:r=null,coreResponse:o=null,message:i=(null===(e=null===(t=chrome.runtime)||void 0===t?void 0:t.lastError)||void 0===e?void 0:e.message)||(null==o?void 0:o.payload.greeting)||"chrome.runtime.lastError is undefined"}=n;super(i),this.coreMessage=r,this.coreResponse=o}}const _n=n=>(t=(()=>!0))=>n.pipe(function(n,t){var e=arguments.length>=2;return function(r){return r.pipe(n?hn((function(t,e){return n(t,e,r)})):A,dn(1),e?yn(t):bn((function(){return new un})))}}(t)).toPromise();const Sn=function(n){const t=(n=>t=>{const e=(e,r,o)=>!(!e.async||n!==e.scope||(async function(){try{const n=n=>{o({success:!0,payload:n})};await t(e.payload,r,n)}catch(n){const t={success:!1,payload:{greeting:n.message}};o(t)}}(),0));chrome.runtime.onMessage.addListener(e),wn(n,t,e)})(n),e=(n=>(t,{tabId:e,frameId:r}={})=>new Promise(((o,i)=>{const u={async:!0,tabId:e||null,payload:t,scope:n},c=n=>{chrome.runtime.lastError||null===n||!n.success?i(new xn({coreMessage:u,coreResponse:n})):o(n.payload)};"number"==typeof e&&"number"==typeof r?chrome.tabs.sendMessage(e,u,{frameId:r},c):"number"==typeof e?chrome.tabs.sendMessage(e,u,c):chrome.runtime.sendMessage(u,c)})))(n),r=gn(n),o=(n=>t=>{const e=(e,r)=>{if(e.async||e.scope!==n)return!1;try{t(e.payload,r)}catch(o){}return!1};chrome.runtime.onMessage.addListener(e),wn(n,t,e)})(n),i=(n=>(t,{tabId:e,frameId:r}={})=>new Promise(((o,i)=>{const u={async:!1,tabId:e||null,payload:t,scope:n},c=n=>{if(chrome.runtime.lastError){const n=chrome.runtime.lastError.message,t="The message port closed before a response was received";n&&n.includes(t)?o():i(new xn({coreMessage:u}))}else n&&!n.success?i(n.payload):o()};"number"==typeof e&&"number"==typeof r?chrome.tabs.sendMessage(e,u,{frameId:r},c):"number"==typeof e?chrome.tabs.sendMessage(e,u,c):chrome.runtime.sendMessage(u,c)})))(n);async function u(n,t){const r=t||{},{async:o=!1}=r,u=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(n);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(e[r[o]]=n[r[o]])}return e}(r,["async"]);return o?e(n,u):i(n,u)}const c=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=C(n),r=W(n,1/0),o=n;return o.length?1===o.length?X(o[0]):fn(r)(on(o,e)):q}(pn(o,r),pn(t,r)),s=new Set;return{send:u,on:function(n){n.length<3?o(n):t(n)},off:function(n){return r(n)},stream:c,getMessage:function(n,t){if(s.has(n))throw new Error("greeting is not unique");s.add(n);const{async:e}=t||{},r=(t,r)=>{let o,i;return"number"==typeof(r=r||{}).tabId&&(o=r.tabId),"number"==typeof r.frameId&&(i=r.frameId),u({greeting:n,data:t},e?{async:e,tabId:o,frameId:i}:{tabId:o,frameId:i})};if(r.toTab=({tabId:t})=>u({greeting:n},e?{async:e,tabId:t}:{tabId:t}),e){return[r,c.pipe(hn(o),cn((([{data:n},t,e])=>[n,t,e])),hn((n=>3===n.length))),_n(c)]}{const n=c.pipe(hn(o),cn((([{data:n},t])=>[n,t])),hn((n=>n.length<3)));return[r,n,_n(n)]}function o([t]){return t&&"object"==typeof t&&t.greeting===n}}}}("@extend-chrome/messages__root"),In=async(n,t,e={})=>{if(!n)throw new Error("key is null.【sendMessage】");return await Sn.send({key:n,params:t},{...e,async:!0})},En=async(t,e,r={active:!0,currentWindow:!0})=>{const o=await n.tabs.query(r);if(o.length>0&&o[o.length-1])return In(t,e,{tabId:o[o.length-1].id});throw new Error("Window not found.【sendCSMessage】")},Pn=(n,t)=>{if(!n)throw new Error("key is null.【onMessage】");Sn.on((async(e,r,o)=>{e.key===n&&t&&t(e.params,o)}))};export{In as a,pn as b,hn as c,cn as d,ln as e,on as f,fn as m,Pn as o,C as p,En as s};
